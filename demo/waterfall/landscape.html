<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript" src="http://a.tbcdn.cn/s/kissy/1.3.0/kissy-min.js"></script>
    <script src="https://rawgithub.com/xudafeng/autoResponsive/master/1.2/build/index.js"></script>
</head>
<body>
<div id="J_AlbumPanel" class="albumPanel">
<div class="ks-autoResponsive-container j_Container">
<div class="album w1">
    <a class="aCover" href="">
        <img src="images/a.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">衣香丽影</a><br/>
            <a href="" class="aL-title">夏日潮女必备</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w1">
    <a class="aCover" href="">
        <img src="images/b.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">BUOU BUOU</a><br/>
            <a href="" class="aL-title">摩登裙正流行</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w2">
    <a class="aCover" href="">
        <img src="images/c.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">埃斯普利特</a><br/>
            <a href="" class="aL-title">经典旅行穿搭</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w1">
    <a class="aCover" href="">
        <img src="images/d.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">音儿</a><br/>
            <a href="" class="aL-title">经选蕾丝衫情</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w1">
    <a class="aCover" href="">
        <img src="images/e.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">BUOU BUOU</a><br/>
            <a href="" class="aL-title">文艺青年必备</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w1">
    <a class="aCover" href="">
        <img src="images/f.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">秋水伊人</a><br/>
            <a href="" class="aL-title">蕾丝还是蕾丝</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w1">
    <a class="aCover" href="">
        <img src="images/g.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">white collar</a><br/>
            <a href="" class="aL-title">穿出你的色彩</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w2">
    <a class="aCover" href="">
        <img src="images/h.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">PEACEBIRD</a><br/>
            <a href="" class="aL-title">梦幻的时光机</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w1">
    <a class="aCover" href="">
        <img src="images/i.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">Five Plus</a><br/>
            <a href="" class="aL-title">潮流新趋势</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w1">
    <a class="aCover" href="">
        <img src="images/j.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">INMAN</a><br/>
            <a href="" class="aL-title">夏日潮女必备</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w2">
    <a class="aCover" href="">
        <img src="images/k.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">BELLE MAISON</a><br/>
            <a href="" class="aL-title">春夏潮流搭配</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w1">
    <a class="aCover" href="">
        <img src="images/l.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">韩都衣舍</a><br/>
            <a href="" class="aL-title">变身夏日新宠</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w1">
    <a class="aCover" href="">
        <img src="images/m.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">蔻驰</a><br/>
            <a href="" class="aL-title">经典永不落幕</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w1">
    <a class="aCover" href="">
        <img src="images/n.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <p>
            <a href="" class="aL-brand">裂帛</a><br/>
            <a href="" class="aL-title">朦胧诱惑新感觉</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<div class="album w1">
    <a class="aCover" href="">
        <img src="images/d.jpg" />
    </a>
    <div class="aLayer">
        <a href="#1" class="aL-fake"></a>
        <a href="javascript:;" class="aL-more j_ALMore">
            —<br>more<br>album<br>—<br>更多专辑<br><i style="
                        border: 2px solid;
                        display: inline-block;
                        width: 30px;
                        height: 30px;
                        border-radius: 30px;
                        font-style: normal;
                        -webkit-transform: rotate(90deg);
                        line-height: 29px;
                        text-indent: 5px;
                        font-family: Futura,Lucida Grande,Tahoma;
                        font-size: 22px;
                    ">&gt;</i>
        </a>
        <p>
            <a href="" class="aL-brand">音儿</a><br/>
            <a href="" class="aL-title">经选蕾丝衫情</a><br/>
            <span class="aL-count">38件商品</span>
        </p>
    </div>
</div>
<!--<div class="album w1">16</div>-->
<!--<div class="album w1">17</div>-->
<!--<div class="album w2">18</div>-->
<!--<div class="album w1">19</div>-->
<!--<div class="album w1">20</div>-->
<!--<div class="album w1">21</div>-->
<!--<div class="album w1">22</div>-->
<!--<div class="album w2">23</div>-->
<!--<div class="album w1">24</div>-->
<!--<div class="album w1">25</div>-->
<!--<div class="album w2">26</div>-->
</div>
<div class="more">
    <a href="">展开更多专辑<br><i></i></a>
</div>
</div>
<script type="tpl" id="tpl">
    <div class="album {w}">
        <a class="aCover" href="">
            <img src="{src}" data-hover-src="" />
        </a>
        <div class="aLayer">
            <a href="#1" class="aL-fake"></a>
            <a href="javascript:;" class="aL-more j_ALMore">
                —<br>more<br>album<br>—<br>更多专辑<br><i style="
                        border: 2px solid;
                        display: inline-block;
                        width: 30px;
                        height: 30px;
                        border-radius: 30px;
                        font-style: normal;
                        -webkit-transform: rotate(90deg);
                        line-height: 29px;
                        text-indent: 5px;
                        font-family: Futura,Lucida Grande,Tahoma;
                        font-size: 22px;
                    ">&gt;</i>
            </a>
            <p>
                <a href="" class="aL-brand">{brand}</a><br/>
                <a href="" class="aL-title">{title}</a><br/>
                <span class="aL-count">{count}</span>
            </p>
        </div>
    </div>
</script>
<script>
    var auto;
    KISSY.use('gallery/autoResponsive/1.2/index,core', function (S, AutoResponsive) {
        var D = S.DOM, E = S.Event, io = S.io, $ = S.all,
                isIE6 = S.UA.ie ==6;

        //D.css('#J_AlbumPanel', {height: 0, overflow: 'hidden'});

        // 跑马灯效果组件
        S.Node.prototype.marquee = function (inc, speed, execAsap /* execute at start of the detection period */) {
            var timer = execAsap ? 0 : inc;
            this.each(function (item) {
                setTimeout(function () {
                    item.fadeIn(speed / 1000);
                }, timer);
                timer += inc;
            });
        };

        var tpl = $('#tpl').html();

        var loader = new AutoResponsive.Loader({
            diff: 10,
            mod: 'auto',
            load: function(success, end){
                $('#loadingPins').show();
                io({
                    url:'data.html',
                    dataType:"json",
                    success:function (d) {

                        if (d['success'] !== 1) {
                            alert('load data error!');
                            end();
                            return;
                        }

                        var items = [];
                        S.each(d['data'], function (item) {
                            items.push(D.create(S.substitute(tpl, item)));
                        });

                        success(items);
                        $(items).hide().marquee(20, 100, 1);
                    },
                    complete:function () {
                        $('#loadingPins').hide();
                    }
                });
            }
        });
        auto = new AutoResponsive({
            container: '.j_Container',
            selector: '.album',
//            closeAnim: true,
            gridWidth: 20,
            resizeFrequency: 150,
            duration: 0.6,
            autoInit: false,
            unitMargin: {
                x: 10,
                y: 10
            },
            plugins: [loader],
            suspend: true,
            landscapeOrientation:false,
            closeAnim:isIE6?true:false
            //direction:'right'
        });
        auto.on('afterLocate', function (e) {
            var elements = e.autoResponsive.elms;
        });
        auto.on('afterUnitArrange', function (e) {
            var elements = e.autoResponsive.elm;
        });
        auto.init();

        setTimeout(function () {
            var $waterfall = $('#J_AlbumPanel'),
                    $bricks = $('div', $('.j_Container')[0]);

            //$waterfall.css({display: 'none', height: 'auto'});
            $bricks.hide().marquee(20, 100, 1);
            $waterfall.slideDown(3);

        }, 100);

        // 加载更多
        E.delegate('#J_AlbumPanel', 'click', '.j_ALMore', function(e){
            loader.load();
        });
    })
</script>
</body>
</html>